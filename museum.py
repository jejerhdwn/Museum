# -*- coding: utf-8 -*-
"""Museum.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1eq3Md5Rn6Y9uAPGSl5zZ-n8-ycr-99dC
"""

import streamlit as st
import requests
import pandas as pd

# í˜ì´ì§€ ì„¤ì •
st.set_page_config(page_title="Open Museum API", page_icon="ğŸ–¼ï¸", layout="centered")

st.title("ğŸ–¼ï¸ Museum Artworks Open API")
st.caption("ê³µê°œ ì˜ˆìˆ  ì‘í’ˆ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ ì‹œê°í™”í•©ë‹ˆë‹¤. (API í‚¤ í•„ìš” ì—†ìŒ)")

# ğŸ”¹ ìƒ˜í”Œ API (Harvard Art Museums Open Access Endpoint)
# ì‹¤ì œë¡œëŠ” êµìˆ˜ë‹˜ êµì•ˆì— ìˆëŠ” streamlit ì•±ì²˜ëŸ¼ JSON ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜´
url = "https://api.harvardartmuseums.org/object?size=5&apikey=DEMO_API_KEY"

if st.button("ì‘í’ˆ ë¶ˆëŸ¬ì˜¤ê¸°"):
    response = requests.get(url)

    if response.status_code == 200:
        data = response.json()

        records = data.get("records", [])
        if len(records) == 0:
            st.warning("ì‘í’ˆ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.")
        else:
            st.success(f"âœ… ì´ {len(records)}ê°œì˜ ì‘í’ˆ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.")

            # í‘œë¡œ ì •ë¦¬
            df = pd.DataFrame([
                {
                    "ì‘í’ˆëª…": r.get("title", "N/A"),
                    "ì‘ê°€": r.get("people", [{}])[0].get("name", "Unknown") if r.get("people") else "Unknown",
                    "ì œì‘ì—°ë„": r.get("dated", "N/A"),
                    "ë¬¸í™”ê¶Œ": r.get("culture", "N/A"),
                    "ì´ë¯¸ì§€": r.get("primaryimageurl", None)
                }
                for r in records
            ])

            # ë°ì´í„° í‘œì‹œ
            st.dataframe(df[["ì‘í’ˆëª…", "ì‘ê°€", "ì œì‘ì—°ë„", "ë¬¸í™”ê¶Œ"]])

            # ì´ë¯¸ì§€ ë³´ì—¬ì£¼ê¸°
            st.subheader("ğŸ¨ ì‘í’ˆ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°")
            for idx, row in df.iterrows():
                if row["ì´ë¯¸ì§€"]:
                    st.image(row["ì´ë¯¸ì§€"], caption=row["ì‘í’ˆëª…"])
                else:
                    st.text(f"{row['ì‘í’ˆëª…']} â€” (ì´ë¯¸ì§€ ì—†ìŒ)")
    else:
        st.error(f"âŒ ìš”ì²­ ì‹¤íŒ¨: {response.status_code}")